;XB

COPY 9900 X
ADDI X 337 X

TEST X = 9999
FJMP NOOVERFLOW
SUBI 9999 9900 X
SUBI 337 X X
SUBI X 1 X

MARK NOOVERFLOW
NOOP
NOOP




;XA

GRAB 300
SEEK 1
COPY F X
REPL AZIMBOT
SEEK 1
COPY F X
REPL ELEVBOT
SEEK 1
COPY F X
REPL FREQBOT
;COUNT OK MSGS
COPY M T
COPY M T
COPY M T
;SPAWN KYBOT
REPL KYBOT
JUMP AFTERSPAWN


;BOTDEFS
MARK KYBOT
LINK 800
GRAB 199

MARK READF
TEST EOF
TJMP REWIND

COPY F M
SEEK -1
COPY F M;RPT FOR CALCS
JUMP READF

MARK REWIND
SEEK -9999
JUMP READF


MARK ELEVBOT
LINK 800
LINK 799
LINK 801

MARK LOOPELEV
TEST X = #ELEV
TJMP DONEBOT
SUBI X #ELEV T
COPY T #MOTR
JUMP LOOPELEV

MARK AZIMBOT
LINK 800
LINK 799
LINK 800

MARK LOOPAZIM
TEST X = #AZIM
TJMP DONEBOT
SUBI X #AZIM T
COPY T #MOTR
JUMP LOOPAZIM

MARK FREQBOT
LINK 800
LINK 799
COPY X #FREQ

MARK DONEBOT
COPY -1 M
JUMP DONE
;END BOTDEFS

MARK AFTERSPAWN
DROP
GRAB 301
LINK 800
SEEK 1
;MOVIE RDY

MARK NEXTBYTE 
TEST EOF
FJMP DOENCRYPT
KILL;KYBOT
WIPE;301
JUMP DONE

MARK DOENCRYPT
COPY F X
ADDI X M X

TEST X = 9999
FJMP NOOVERFLOW
SEEK -1
SUBI 9999 F X
SUBI M X X
SUBI X 1 X
;RESULT IN X
REPL SENDBYTE
JUMP NEXTBYTE

MARK NOOVERFLOW
VOID M
;RESULT IN X
REPL SENDBYTE
JUMP NEXTBYTE 

MARK SENDBYTE
LINK 799
COPY X #DATA
JUMP DONE

MARK DONE