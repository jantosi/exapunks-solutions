;PH


GRAB 300
LINK 800

MARK FILE300LEN
TEST EOF
ADDI X 1 X
SEEK 1
FJMP FILE300LEN

DROP
LINK -1
GRAB 301
LINK 800

MARK SINGLENUMBER
 TEST EOF
 TJMP DONEDIALLING
 COPY 11 T;PAGERNUM.LEN
 MARK DIAL
 COPY F #DIAL
 SUBI T 1 T
 TJMP DIAL

 REPL TELLMSG
 REPL TSR

 MULI 2 X T
 MARK WAITLOOP
 FJMP DISCONNECT
 SUBI T 1 T
 JUMP WAITLOOP

 MARK DISCONNECT
 COPY -1 #DIAL

 JUMP SINGLENUMBER


MARK DONEDIALLING
;SPAWN CLOCK SYNC BOTS
SEEK -9999
;MASTER CLK INIT VAL
COPY 149 X


  MARK SYNCSINGLENUMBER
  TEST EOF
  TJMP SYNCDONEDIALLING
  COPY 11 T;PAGERNUM.LEN
  MARK SYNCDIAL
  COPY F #DIAL
  SUBI T 1 T
  TJMP SYNCDIAL

  REPL SYNCBOT
  SUBI X 20 X

  MARK SYNCDISCONNECT
  COPY -1 #DIAL

  JUMP SYNCSINGLENUMBER

  MARK SYNCDONEDIALLING


JUMP CLEANUP

MARK CLEANUP
LINK -1
DROP
LINK 800
GRAB 300
LINK -1
HALT


MARK TSR
LINK 800
MARK TSRDATACOPY
COPY M T
FJMP TSRDONECOPY
COPY T #DATA
JUMP TSRDATACOPY

MARK TSRDONECOPY
HALT

MARK TELLMSG
GRAB 300
MARK TELLMSGMORE
TEST EOF
TJMP TELLMSGDONE
COPY F M
JUMP TELLMSGMORE

MARK TELLMSGDONE
COPY 0 M
HALT


MARK SYNCBOT
LINK 800
COPY X T
MARK IDLE
SUBI T 1 T
TJMP IDLE
COPY 1 #PAGE

