;XA


;INIT
GRAB 300
@REP 11
COPY F M
@END
COPY -1 M
DROP
HALT


;XB


LINK 800
MAKE
MARK COPY
COPY M X
;EOF MARKER
TEST X = -1
COPY X F
FJMP COPY
;ENDLESS

;REMOVE EOF MARKER
SEEK -1
VOID F

MARK DIALTOPNUMBER
COPY -1 #DIAL ;DC
SEEK -9999
TEST EOF
TJMP CLEANUP
@REP 11
COPY F #DIAL
@END

;REMOVE TOP NUMBER
SEEK -9999
@REP 11
VOID F
@END

;SPAWN EXA, WAIT FOR
;NUMBERS
REPL VISITOR
SEEK 9999;READY FOR CPY
TEST MRD
FJMP DIALTOPNUMBER
VOID M
;TODO ADD CHECK IF
;CONN REFUSED
JUMP COPY

MARK CLEANUP
WIPE
HALT

MARK VISITOR
LINK 800
COPY 200 M;CONN OK
GRAB 200
MARK NEWNUMBER
SEEK 1
@REP 11
COPY F M
@END
TEST EOF
FJMP NEWNUMBER
COPY -1 M
DROP
HALT
