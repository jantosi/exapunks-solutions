;XA

MAKE;FILE 400
DROP
LINK 800

GRAB 199
MARK PLAYERLOOP
TEST EOF
TJMP SORTFILE
COPY F X
REPL SCORER
JUMP PLAYERLOOP

MARK SCORER
GRAB X
SEEK 1
;BA+ZA+APB
ADDI F F X
ADDI X F X
DIVI X 3 X
;WRT+OI/OD
MULI F F T
DIVI T F T
ADDI T X X
;PC - PS
SUBI F F T
MULI T 20 T
ADDI T X X
;SCORE IN X
SEEK -9999
COPY F T;NAME
DROP
LINK -1
;GO TALK TO RECORDKEEPER
GRAB 400
SEEK 9999
COPY X F
COPY T F
HALT

MARK SORTFILE
@REP 20
NOOP
@END
DROP
LINK -1
COPY 0 X
GRAB 400

MARK SCOREFILE
TEST EOF
TJMP SEEKNAME
TEST F > X
SEEK 1
FJMP SCOREFILE
SEEK -2
COPY F X
SEEK 1
JUMP SCOREFILE

MARK SEEKNAME
SEEK -9999
MARK SEEKING
TEST F = X
SEEK 1
FJMP SEEKING
SEEK -1
COPY F X
WIPE
MAKE
COPY X F
DROP